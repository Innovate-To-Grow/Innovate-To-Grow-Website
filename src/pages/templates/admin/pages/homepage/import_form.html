{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}Import HomePage JSON{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 20px auto; padding: 20px;">
    <h1 style="margin-bottom: 20px;">Import Home Page from JSON</h1>

    {% if warnings %}
    <div style="background: #fff3cd; border: 1px solid #ffc107; border-radius: 6px; padding: 12px 16px; margin-bottom: 20px;">
        <strong>Import completed with warnings:</strong>
        <ul style="margin: 8px 0 0 0; padding-left: 20px;">
            {% for w in warnings %}
            <li>{{ w }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if error %}
    <div style="background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 6px; padding: 12px 16px; margin-bottom: 20px; color: #721c24;">
        <strong>Error:</strong> {{ error }}
    </div>
    {% endif %}

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div style="margin-bottom: 16px;">
            <label for="json_file" style="display: block; margin-bottom: 6px; font-weight: 600;">
                JSON File
            </label>
            <input type="file" name="json_file" id="json_file" accept=".json"
                   style="display: block; width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
            <p style="margin-top: 6px; font-size: 12px; color: #666;">
                Upload a JSON file previously exported from the admin. If a homepage with the same name
                already exists, it will be updated (components replaced). New homepages are created as drafts.
            </p>
        </div>
        <div style="display: flex; gap: 10px; align-items: center;">
            <button type="submit"
                    style="padding: 8px 24px; background: #0f2d52; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">
                Import
            </button>
            <a href="{% url 'admin:pages_homepage_changelist' %}"
               style="padding: 8px 16px; color: #666; text-decoration: none; font-size: 14px;">
                Back to Home Pages
            </a>
        </div>
    </form>
</div>
{% endblock %}
