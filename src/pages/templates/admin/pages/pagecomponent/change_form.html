{% extends "admin/change_form.html" %}
{% load static %}

{% block extrahead %}
{{ block.super }}
<!-- Quill CSS -->
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
<!-- Custom styles for component editor -->
<link rel="stylesheet" href="{% static 'pages/css/quill-admin.css' %}">
<link rel="stylesheet" href="{% static 'pages/css/component-admin.css' %}">
{% endblock %}

{% block object-tools-items %}
{{ block.super }}
<li>
    <a href="#" id="component-preview-btn" class="popup-preview-link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 14px; height: 14px; vertical-align: middle; margin-right: 4px;">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
        Live Preview
    </a>
</li>
{% endblock %}

{% block content %}
{{ block.super }}

<!-- Quill Editor Container for html_content -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Find the html_content field and add Quill editor after the textarea
        const htmlContentField = document.querySelector('.field-html_content');
        if (htmlContentField) {
            // Create Quill container
            const quillWrapper = document.createElement('div');
            quillWrapper.className = 'quill-editor-wrapper';
            quillWrapper.innerHTML = '<div id="quill-editor"></div>';
            
            // Insert after the textarea
            const textarea = document.getElementById('id_html_content');
            if (textarea) {
                textarea.parentNode.insertBefore(quillWrapper, textarea.nextSibling);
            }
        }
    });
</script>

<!-- Quill JS -->
<script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
<!-- Quill Image Resize Module -->
<script src="https://cdn.jsdelivr.net/npm/quill-image-resize-module@3.0.0/image-resize.min.js"></script>
<!-- Component Admin JS -->
<script src="{% static 'pages/js/component-admin.js' %}"></script>
{% endblock %}

