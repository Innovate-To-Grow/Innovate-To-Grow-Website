# Generated by Django 4.2.11 on 2025-12-24 10:57

import django_ckeditor_5.fields
from django.db import migrations, models
import pages.models.pages.validators
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = []

    operations = [
        migrations.CreateModel(
            name="HomePage",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "name",
                    models.CharField(
                        help_text="Internal name to identify this home page version",
                        max_length=200,
                    ),
                ),
                (
                    "body",
                    models.TextField(blank=True, help_text="Rich text content (HTML)"),
                ),
                (
                    "is_active",
                    models.BooleanField(
                        default=False,
                        help_text="Only one home page can be active at a time",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
            ],
            options={
                "verbose_name": "Home Page",
                "verbose_name_plural": "Home Pages",
                "ordering": ["-created_at"],
            },
        ),
        migrations.CreateModel(
            name="Page",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "meta_title",
                    models.CharField(
                        blank=True,
                        help_text="SEO title (will fall back to page title if empty).",
                        max_length=255,
                    ),
                ),
                (
                    "meta_description",
                    models.TextField(
                        blank=True,
                        help_text="SEO description for search engines and social sharing.",
                    ),
                ),
                (
                    "meta_keywords",
                    models.CharField(
                        blank=True,
                        help_text="Comma-separated SEO keywords (optional, some search engines may ignore this).",
                        max_length=255,
                    ),
                ),
                (
                    "og_image",
                    models.URLField(
                        blank=True,
                        help_text="Open Graph share image URL (e.g. for social media cards).",
                        null=True,
                    ),
                ),
                (
                    "canonical_url",
                    models.URLField(
                        blank=True,
                        help_text="Canonical URL for SEO (optional, usually auto-resolved).",
                        null=True,
                    ),
                ),
                (
                    "meta_robots",
                    models.CharField(
                        blank=True,
                        help_text="Robots meta tag value, e.g. 'index,follow' or 'noindex,nofollow'.",
                        max_length=100,
                    ),
                ),
                (
                    "google_site_verification",
                    models.CharField(
                        blank=True,
                        help_text="Google Search Console verification token for this page (optional).",
                        max_length=255,
                    ),
                ),
                (
                    "google_structured_data",
                    models.JSONField(
                        blank=True,
                        help_text="Optional JSON-LD structured data payload for Google Search.",
                        null=True,
                    ),
                ),
                (
                    "slug_depth",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Redundant: number of path segments (e.g. 'about/team' -> 1 slash).",
                    ),
                ),
                (
                    "view_count",
                    models.PositiveIntegerField(
                        default=0,
                        help_text="Redundant: total view count (may be updated externally).",
                    ),
                ),
                (
                    "last_viewed_at",
                    models.DateTimeField(
                        blank=True,
                        help_text="Redundant: timestamp of last page view.",
                        null=True,
                    ),
                ),
                (
                    "template_name",
                    models.CharField(
                        blank=True,
                        help_text="Optional template name override for rendering this page.",
                        max_length=255,
                    ),
                ),
                (
                    "published",
                    models.BooleanField(
                        default=False,
                        help_text="Whether this page is visible to the public.",
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("updated_at", models.DateTimeField(auto_now=True)),
                ("page_uuid", models.UUIDField(default=uuid.uuid4, editable=False)),
                (
                    "title",
                    models.CharField(
                        help_text="Human readable title of the page.", max_length=200
                    ),
                ),
                (
                    "slug",
                    models.CharField(
                        help_text="User-defined slug. Supports nested paths, e.g. 'about/team'. Do NOT include leading or trailing '/'.",
                        max_length=255,
                        unique=True,
                        validators=[pages.models.pages.validators.validate_nested_slug],
                    ),
                ),
                (
                    "page_type",
                    models.CharField(
                        choices=[
                            ("page", "Rich Text Page"),
                            ("external", "External URL"),
                        ],
                        default="page",
                        help_text="Page behavior type.",
                        max_length=20,
                    ),
                ),
                (
                    "page_body",
                    django_ckeditor_5.fields.CKEditor5Field(
                        blank=True,
                        help_text="Rich text content for 'page' type.",
                        null=True,
                    ),
                ),
                (
                    "external_url",
                    models.URLField(
                        blank=True,
                        help_text="Target URL for 'external' type page.",
                        null=True,
                    ),
                ),
            ],
            options={
                "verbose_name": "Page",
                "verbose_name_plural": "Pages",
                "ordering": ["slug"],
            },
        ),
    ]
